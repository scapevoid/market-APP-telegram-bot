<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <!-- style -->
    <link rel="stylesheet" href="style_main.css">
    <!--main body-->
  <header>
  <div  style="background-color: lightcyan; border-radius: 25px; height: 75px; width: 100%; align-content: center;">
    <span>
      <a style="text-decoration: none;" href="">
      <img style="position: relative; border-radius: 20%; left:8%; height: 100%; justify-self: center; margin: 0%; padding: 0;" src="images/17105187.png" alt="forum image">
      </a>
      <a style="text-decoration: none;" href="">
        <img style="position: relative; border-radius: 20%; left:19%; height: 100%; justify-self: center; margin: 0%; padding: 0;" src="images/images.png" alt="forum image">
      </a>
      <a style="text-decoration: none;" href="">
      <img style="position: relative; border-radius: 20%; left:30%; height: 100%; justify-self: center; margin: 0%; padding: 0;" src="images/1251615.png" alt="forum image">
      </a>
    </span>
  </div>
  </header>
  <main>
    <div class="body_Market" style="top: 90px; background-color: lightcyan; height: 84%; width: 99%; z-index: 1; border-radius: 25px;">
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
        <div class="card_market" style="height: 0px; width: 0px; margin: 7%; margin-left: 20%; padding: 32% 32%; background-color: white; border-radius: 25%; right: 50%;"></div>
      </div>
      <div class="PopOut" style="visibility:visible; height: 70%; width: 96%; z-index: 2; border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 25px; border-top-right-radius: 25px;  background-color: rgb(184, 215, 215); position: absolute; bottom: 0px; ">
       <!-- top -->
        <button onclick="document.querySelector('.PopOut').style.visibility = `hidden`" style="position: absolute; right: 0px; cursor: pointer;">
          close
        </button>
        <h1 style="top: 3%; left: 3%; font-size: 90%; margin: 0; padding: 0; position: absolute;">
          NAME PRODUCT
        </h1>
        <hr style="top: 8%; position: relative; background-color: black; border: 1px solid lightcyan;">

        <div class="MainPopOut" style="position: relative; top: 5%; overflow-y: scroll; height: 89%; width: 100%; padding: 10px; box-sizing: border-box;">
         
          <!-- there list of items of selected product -->
          <div style="margin: 5px; padding: auto; background-color: black; width: 100%; height: 16.8%; border-radius: 15px; display:block;">
            <img src="images/card_image_1.png" style="margin: 1%; width: 50px; height: auto; border-radius: 25%;" alt="PRODUCT">
            <p style="position: relative; bottom: 39.3%; width: 165px; border-radius: 12px; margin: 1px; padding: 14px; display:inline-block; background-color: lightcyan; color: black;">
            EXAMPLE
            </p>
            <p style="position: relative; bottom: 39.3%; border-radius: 12px; margin: 0px; padding: 14px; display:inline-block; background-color: lightcyan; color: black;">
            0.00$
            </p>
          </div>
          
        </div>
        
      </div>
  </main>
  <script defer>
      const cards = document.querySelectorAll('.card_market');
      cards.forEach((card, index) =>
        {
            card.style.display = 'flex';
            card.style.justifyContent = 'center';
            card.style.alignItems = 'center';
            card.style.cursor = 'pointer';
            card.style.position = 'relative';
            card.style.left = '0%';


            const img = document.createElement('img');

            img.src = `images/card_image_${index + 1}.png`;
            img.alt = `Card ${index + 1} image`;
            img.style.width = '100%';
            img.style.height = 'auto';
            img.style.position = 'absolute';
            img.style.borderRadius = '25%';
            img.align = 'center';
            card.appendChild(img);
            card.addEventListener('click', () => 
            {
            showPopOut(index);
            });
        });

        function LoadList(index)
        {
          fetch(`http://127.0.0.1:5001/productslist/${index}`, {
            method: 'GET', 
          })
          .then(Response => Object.assign(Response.json()))
            .then(data => 
              {
                const total = data["total"];
                for (let i = 1; i < total; i++)
                {
                  const name_product = data[`product${i}`]["productname"];
                  const price_product = data[`product${i}`]["productprice"];
                  const image_product = data[`product${i}`]["producticonpath"];


                  const list = document.querySelector('.MainPopOut');
                  const div = document.createElement('div');
                  const img = document.createElement('img');
                  const name = document.createElement('p');
                  const price = document.createElement('p');

                  img.src = image_product;
                  img.alt = `Card ${index + 1} image`;
                  img.style.width = '50px';
                  img.style.height = 'auto';
                  img.style.borderRadius = '25%';
                  img.style.margin = '1%';
                  img.style.display = 'inline-block';
                  img.style.position = 'relative';
                  img.style.bottom = '39.3%';
                  img.style.left = '0%';
                  img.style.padding = '0px';
                  img.style.boxSizing = 'border-box';
                  
                  name.innerHTML = name_product;
                  name.style.position = 'relative';
                  name.style.bottom = '39.3%';
                  name.style.width = '165px';
                  name.style.borderRadius = '12px';
                  name.style.margin = '1px';
                  name.style.padding = '14px';
                  name.style.display = 'inline-block';
                  name.style.backgroundColor = 'lightcyan';
                  name.style.color = 'black';
                  name.style.boxSizing = 'border-box';
                  name.style.textAlign = 'center';
                  name.style.fontSize = '90%';



                  div.style.margin = '5px';
                  div.style.padding = 'auto';
                  div.style.backgroundColor = 'black';
                  div.style.width = '100%';
                  div.style.height = '16.8%';
                  div.style.borderRadius = '15px';
                  div.style.display = 'block';

                  list.appendChild(div);
                  div.appendChild(img);
                  div.appendChild(name);
                  div.appendChild(price);
                  price.innerHTML = price_product;
                }
              })
       }


        function showPopOut(index)
        {
          const card = document.querySelectorAll('.card_market')[index];
          const PopOut = document.querySelector('.PopOut');
          PopOut.style.visibility = 'visible';
          switch(index)
          {
            case 0:
              let list = LoadList(index);
              break;
          }
        }
  </script>
</body>
</html>